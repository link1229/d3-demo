<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>d3.js绘制饼图</title>
    <script src="../static/js/d3.js"></script>
</head>

<body>
    <div id="svg"></div>
    <script>
        const svg = d3.select("#svg").append("svg").attr("width", "300").attr("height", "300");
        const dataset = [
            { startAngle: 0, endAngle: Math.PI * 0.6 },
            { startAngle: Math.PI * 0.6, endAngle: Math.PI },
            { startAngle: Math.PI, endAngle: Math.PI * 1.75 },
            { startAngle: Math.PI * 1.75, endAngle: Math.PI * 2 }
        ]
        const colors=d3.scaleOrdinal(d3.schemeCategory10)
        // innerRadius=>内半径;outerRadius=>外半径
        const arcPath = d3.arc().innerRadius(50).outerRadius(100)
        svg.selectAll("path").data(dataset).enter().append("path").attr('d', d => arcPath(d))
            .attr('transform', 'translate(150,200)')
            .attr("stroke", "#000").attr('stroke-width', "3px")
            .attr('fill', (d,i)=>colors(i))
        svg.selectAll("text").data(dataset).enter().append("text").attr('transform', d=>'translate(150,200)'+`translate(${arcPath.centroid(d)})`)
        .attr("text-anchor","middle").attr("fill","#fff").attr("font-size","14px")
        .text(d=>(d.endAngle-d.startAngle)*180/Math.PI+"度")
    </script>
</body>

</html>